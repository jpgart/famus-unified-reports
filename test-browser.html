<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Embedded Data</title>
</head>
<body>
    <h1>Test de Datos Embebidos</h1>
    <div id="results"></div>
    
    <script type="module">
        import { 
            embeddedCostData, 
            embeddedStockData, 
            calculateMetricsFromEmbedded 
        } from './src/data/costDataEmbedded.js';
        
        const resultsDiv = document.getElementById('results');
        
        try {
            console.log('🔍 Testing embedded data in browser...');
            
            // Test data arrays
            console.log('📊 Cost data records:', embeddedCostData?.length || 'undefined');
            console.log('📦 Stock data records:', embeddedStockData?.length || 'undefined');
            
            resultsDiv.innerHTML = `
                <p>📊 Cost data records: ${embeddedCostData?.length || 'undefined'}</p>
                <p>📦 Stock data records: ${embeddedStockData?.length || 'undefined'}</p>
            `;
            
            // Test metrics calculation
            calculateMetricsFromEmbedded().then(metrics => {
                console.log('📈 Calculated metrics for', Object.keys(metrics).length, 'lots');
                resultsDiv.innerHTML += `<p>📈 Calculated metrics for ${Object.keys(metrics).length} lots</p>`;
                
                if (Object.keys(metrics).length > 0) {
                    resultsDiv.innerHTML += `<p>✅ Data is working correctly!</p>`;
                } else {
                    resultsDiv.innerHTML += `<p>❌ No metrics calculated</p>`;
                }
            }).catch(error => {
                console.error('❌ Error calculating metrics:', error);
                resultsDiv.innerHTML += `<p>❌ Error calculating metrics: ${error.message}</p>`;
            });
            
        } catch (error) {
            console.error('❌ Import error:', error);
            resultsDiv.innerHTML += `<p>❌ Import error: ${error.message}</p>`;
        }
    </script>
</body>
</html>
